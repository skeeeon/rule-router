# Basic Rule Template
# 
# This is a simple rule with a single condition. Perfect for getting started.
# Edit the CHANGE_ME placeholders below with your actual values.

- subject: "CHANGE_ME.input.subject"
  # The NATS subject to listen to for incoming messages
  # Example: sensors.temperature, orders.created, logs.error
  
  conditions:
    operator: and
    # Use "and" if all conditions must be true, "or" if any condition is sufficient
    
    items:
      - field: "value"
        # The JSON field to check in the incoming message
        # Use dot notation for nested fields: user.profile.tier
        
        operator: gt
        # Available operators:
        #   eq, neq        - equals, not equals
        #   gt, lt         - greater than, less than
        #   gte, lte       - greater/less than or equal
        #   contains       - string substring or array membership
        #   not_contains   - inverse of contains
        #   in, not_in     - check if value is in/not in array
        #   exists         - field exists (ignores value)
        
        value: 30
        # The value to compare against
  
  action:
    subject: "CHANGE_ME.output.subject"
    # The NATS subject to publish the action to
    # Can use template variables: alerts.{region}.high
    
    payload: |
      {
        "message": "Rule matched",
        "value": {value},
        "timestamp": "{@timestamp()}",
        "id": "{@uuid7()}"
      }
    # Template variables available:
    #   {fieldName}        - Message field
    #   {@timestamp()}     - Current ISO timestamp
    #   {@uuid7()}         - Time-ordered UUID
    #   {@uuid4()}         - Random UUID
    #   {@subject}         - Full NATS subject
    #   {@subject.0}       - Subject token by index
